[build]
  command = "npm install"
  functions = "netlify/functions"
  publish = "public"

# Versi Node.js digunakan di Netlify melalui file `.nvmrc` atau di environment, bukan dari toml.
# Jadi 'NODE_VERSION = "18"' dihapus karena tidak valid di bagian ini.

[functions]
  node_bundler = "esbuild"
  external_node_modules = [
    "@supabase/supabase-js",
    "@google/generative-ai",
    "googleapis",
    "dotenv"
  ]

# Redirect API ke Functions (contoh: /api/chat â†’ /.netlify/functions/chat)
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200